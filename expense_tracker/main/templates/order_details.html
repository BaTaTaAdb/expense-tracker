{% extends 'base.html' %}

{% block content %}
<div class="card mt-5">
    <div class="card-header">
        <h3>{{ order.user.first_name }}'s Order - #{{ order.id }}</h3>
    </div>
    <div class="card-body">
        <h5 class="card-title">Order Details</h5>
        <p><strong>Order ID:</strong> {{ order.id }}</p>
        <p><strong>Status:</strong> {{ order.get_status_display }}</p>
        <p><strong>Created At:</strong> {{ order.created_at }}</p>
        <p><strong>Updated At:</strong> {{ order.updated_at }}</p>
        <hr>
        <h5>Products</h5>
        <ul class="list-group">
            {% for order_item in order.orderitem_set.all %}
                        <li class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center">
                                    {% if order_item.product.image %}
                                    <img src="{{ order_item.product.image.url }}" alt="Product Icon" class="me-2" style="width: 24px; height: 24px;">
                                    {% endif %}
                                    <span class="badge bg-primary me-2">{{ order_item.quantity }}x</span>
                                    <a href="{% url 'product_detail' order_item.product.pk %}" class="text-decoration-none" style="color: inherit;">{{ order_item.product.name }}</a>
                                </div>
                                <span class="fw-bold">{{ order_item.product.price }} â‚¬</span>
                            </div>
                        </li>
            {% endfor %}
        </ul>
        <hr>
        <h5>Delivery Details</h5>
        {% if order.delivery %}
            <p><strong>Courier:</strong> {{ order.delivery.courier.name }}</p>
            <p><strong>Status:</strong> {{ order.delivery.order_status }}</p>
        {% else %}
            <p>Delivery details not available.</p>
        {% endif %}
    </div>
    <div class="card-footer text-end">
        <a href="{% url 'dashboard' %}" class="btn btn-secondary">Back to Orders</a>
    </div>
</div>
{% endblock %}
